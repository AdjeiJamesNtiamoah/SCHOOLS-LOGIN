<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Teacher Profile | Flawless Graphics</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
    body {
        background:#071833;
        color:white;
        margin:0;
        font-family:Inter, Arial;
    }

    header {
        padding:20px;
        background:#0f254d;
        display:flex;
        justify-content:space-between;
        align-items:center;
        box-shadow:0 0 15px rgba(0,0,0,0.4);
    }

    .logout-btn {
        background:#ff4d4d;
        padding:10px 18px;
        border:none;
        border-radius:6px;
        color:white;
        cursor:pointer;
    }

    .container {
        padding:25px;
    }

    .card {
        background:#102a57;
        padding:20px;
        margin-bottom:20px;
        border-radius:12px;
        box-shadow:0 0 15px rgba(0,0,0,0.3);
    }

    .btn {
        padding:12px;
        background:#00a8ff;
        border:none;
        border-radius:8px;
        margin-top:10px;
        font-weight:bold;
        cursor:pointer;
        color:white;
        width:100%;
    }

    .btn2 {
        background:#4caf50;
        margin-top:10px;
        padding:12px;
        border-radius:8px;
        width:100%;
        cursor:pointer;
        color:white;
        border:none;
    }

    .btn-red {
        background:#d9534f;
        margin-top:10px;
        padding:12px;
        border-radius:8px;
        width:100%;
        cursor:pointer;
        color:white;
        border:none;
    }
</style>
</head>

<body>

<header>
    <h2 id="teacherName">Teacher Dashboard</h2>
    <button class="logout-btn" onclick="logout()">Logout</button>
</header>

<div class="container">

    <!-- Teacher Information -->
    <div class="card">
        <h3>Your Profile</h3>
        <p><strong>Name:</strong> <span id="nameBox"></span></p>
        <p><strong>Email:</strong> <span id="emailBox"></span></p>
        <p><strong>Department:</strong> <span id="deptBox"></span></p>
    </div>

    <!-- Attendance Controls -->
    <div class="card">
        <h3>Attendance</h3>

        <button class="btn2" onclick="clockIn()">Clock In</button>
        <button class="btn-red" onclick="clockOut()">Clock Out</button>

        <p id="attendanceStatus" style="margin-top:10px; opacity:0.8;"></p>
    </div>

    <!-- Teacher actions -->
    <div class="card">
        <h3>Actions</h3>

        <button class="btn" onclick="window.location='teacher-classes-extended.html'">
            View / Manage Classes
        </button>

        <button class="btn" onclick="window.location='teacher-messaging-leave.html'">
            Messaging & Leave Portal
        </button>
    </div>

</div>

<script>
// Load session
let T = JSON.parse(localStorage.getItem("active_teacher") || "null");

if (!T) {
    alert("Session expired. Please log in again.");
    window.location.href = "teacher-login.html";
}

document.getElementById("teacherName").textContent = T.name;
document.getElementById("nameBox").textContent = T.name;
document.getElementById("emailBox").textContent = T.email;
document.getElementById("deptBox").textContent = T.department;

// Attendance Storage
function getAttendance() {
    return JSON.parse(localStorage.getItem("teacher_attendance") || "[]");
}

function saveAttendance(list) {
    localStorage.setItem("teacher_attendance", JSON.stringify(list));
}

function clockIn() {
    let logs = getAttendance();
    logs.push({
        teacher: T.name,
        email: T.email,
        time: new Date().toLocaleString(),
        type: "IN"
    });
    saveAttendance(logs);
    document.getElementById("attendanceStatus").textContent = "Clocked In ✔";
}

function clockOut() {
    let logs = getAttendance();
    logs.push({
        teacher: T.name,
        email: T.email,
        time: new Date().toLocaleString(),
        type: "OUT"
    });
    saveAttendance(logs);
    document.getElementById("attendanceStatus").textContent = "Clocked Out ✔";
}

function logout() {
    localStorage.removeItem("active_teacher");
    window.location.href = "teacher-login.html";
}
</script>

</body>
</html>
